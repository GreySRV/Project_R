{% extends "base.html" %}
{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç{% endblock %}

{% block content %}
<h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>

<p><strong>–õ–æ–≥–∏–Ω:</strong> {{ login }}</p>

<a href="{{ url_for('frontend.user_collections') }}">üìö –ú–æ–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</a>

<hr>

<!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
<button onclick="toggleBlock('settingsBlock')">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
<div id="settingsBlock" style="display:none; margin-top: 10px;">
  <!-- –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è -->
  <button onclick="toggleBlock('passwordForm')">üîí –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
  <div id="passwordForm" style="display:none; margin-top: 10px;">
    <form method="POST" action="{{ url_for('frontend.change_password') }}" onreset="clearPasswordFields()">
      <label>–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å:</label><br>
      <input type="password" name="old_password" id="old_password"><br>
      <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label><br>
      <input type="password" name="new_password" id="new_password"><br><br>
      <button type="submit">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
      <button type="reset" type="button" onclick="toggleBlock('passwordForm')">–û—Ç–º–µ–Ω–∞</button>
    </form>
  </div>
</div>

<hr style="margin-top: 30px;">
<a href="{{ url_for('frontend.objects') }}">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>

<script>
  function toggleBlock(id) {
    const el = document.getElementById(id);
    el.style.display = (el.style.display === "none" || el.style.display === "") ? "block" : "none";
    if (id === "passwordForm" && el.style.display === "none") clearPasswordFields();
    if (id === "settingsBlock" && el.style.display === "none") {
      document.getElementById('passwordForm').style.display = "none";
      clearPasswordFields();
    }
  }

  function clearPasswordFields() {
    document.getElementById("old_password").value = "";
    document.getElementById("new_password").value = "";
  }
</script>
{% endblock %}

